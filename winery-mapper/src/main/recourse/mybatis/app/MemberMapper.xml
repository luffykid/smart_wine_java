<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.changfa.frame.mapper.app.MemberMapper" >
    <resultMap id="memberMap" type="com.changfa.frame.model.Member" >
        <result column="id" property="id" jdbcType="BIGINT" />
        <result column="mbr_level_id" property="mbrLevelId" jdbcType="BIGINT" />
        <result column="winery_id" property="wineryId" jdbcType="BIGINT" />
        <result column="token" property="token" jdbcType="VARCHAR" />
        <result column="nick_name" property="nickName" jdbcType="VARCHAR" />
        <result column="phone" property="phone" jdbcType="VARCHAR" />
        <result column="wechat" property="wechat" jdbcType="VARCHAR" />
        <result column="open_id" property="openId" jdbcType="VARCHAR" />
        <result column="user_icon" property="userIcon" jdbcType="VARCHAR" />
        <result column="status" property="status" jdbcType="INTEGER" />
        <result column="status_time" property="statusTime" jdbcType="TIMESTAMP" />
        <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    </resultMap>

    <sql id="Base_Column_List">
      id,mbr_level_id,winery_id,token,nick_name,phone,wechat,open_id,
      user_icon,status,status_time,create_date
    </sql>

    <insert id="save" parameterType="com.changfa.frame.model.Member" >
        insert into m_member (id, mbr_level_id, winery_id, token, nick_name, phone, wechat, 
            open_id, user_icon, status, status_time, create_date)
        values (#{id}, #{mbrLevelId}, #{wineryId}, #{token}, #{nickName}, #{phone}, #{wechat}, 
            #{openId}, #{userIcon}, #{status}, #{statusTime}, #{createDate})
    </insert>

    <select id="selectList" resultMap="memberMap" >
        select 
        <include refid="Base_Column_List" />
        from m_member
        <where >
            <if test="id != null" >
                and null.id = #{id}
            </if>
            <if test="mbrLevelId != null" >
                and null.mbr_level_id = #{mbrLevelId}
            </if>
            <if test="wineryId != null" >
                and null.winery_id = #{wineryId}
            </if>
            <if test="token != null and token != ''" >
                and null.token = #{token}
            </if>
            <if test="nickName != null and nickName != ''" >
                and null.nick_name = #{nickName}
            </if>
            <if test="phone != null and phone != ''" >
                and null.phone = #{phone}
            </if>
            <if test="wechat != null and wechat != ''" >
                and null.wechat = #{wechat}
            </if>
            <if test="openId != null and openId != ''" >
                and null.open_id = #{openId}
            </if>
            <if test="userIcon != null and userIcon != ''" >
                and null.user_icon = #{userIcon}
            </if>
            <if test="status != null" >
                and null.status = #{status}
            </if>
            <if test="statusTime != null" >
                and null.status_time = #{statusTime}
            </if>
            <if test="createDate != null" >
                and null.create_date = #{createDate}
            </if>
        </where>
    </select>

</mapper>